'use strict';

var _avaSpec = require('ava-spec');

var jssm = require('../../../build/jssm.es5.js');
/* eslint-disable max-len */

(0, _avaSpec.describe)('cycle strategies', async function (_it) {

  var is_v = function is_v(str, v, it) {
    return it(_avaSpec.test, function (t) {
      return t.deepEqual(v, jssm.parse(str));
    });
  };

  (0, _avaSpec.describe)('basic cycle', async function (it) {
    is_v('[a b c] -> +1;', [{ from: ['a', 'b', 'c'], key: 'transition', se: { kind: '->', to: { key: 'cycle', value: 1 } } }], it);
  });

  (0, _avaSpec.describe)('negative cycle', async function (it) {
    is_v('[a b c] -> -1;', [{ from: ['a', 'b', 'c'], key: 'transition', se: { kind: '->', to: { key: 'cycle', value: -1 } } }], it);
  });

  (0, _avaSpec.describe)('nullary cycle', async function (it) {
    is_v('[a b c] -> +0;', [{ from: ['a', 'b', 'c'], key: 'transition', se: { kind: '->', to: { key: 'cycle', value: 0 } } }], it);
  });

  (0, _avaSpec.describe)('wide cycle', async function (it) {
    is_v('[a b c] -> +2;', [{ from: ['a', 'b', 'c'], key: 'transition', se: { kind: '->', to: { key: 'cycle', value: 2 } } }], it);
  });

  (0, _avaSpec.describe)('illegal fractional cycle throws', async function (it) {
    it('throws', function (t) {
      return t.throws(function () {
        jssm.parse('[a b c] -> +2.5;');
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9qcy90ZXN0cy9jeWNsZXMuanMiXSwibmFtZXMiOlsianNzbSIsInJlcXVpcmUiLCJfaXQiLCJpc192Iiwic3RyIiwidiIsIml0IiwidCIsImRlZXBFcXVhbCIsInBhcnNlIiwiZnJvbSIsImtleSIsInNlIiwia2luZCIsInRvIiwidmFsdWUiLCJ0aHJvd3MiXSwibWFwcGluZ3MiOiI7O0FBR0E7O0FBRUEsSUFBTUEsT0FBT0MsUUFBUSw0QkFBUixDQUFiO0FBSkE7O0FBVUEsdUJBQVMsa0JBQVQsRUFBNkIsZ0JBQU1DLEdBQU4sRUFBYTs7QUFFeEMsTUFBTUMsT0FBTyxTQUFQQSxJQUFPLENBQUNDLEdBQUQsRUFBTUMsQ0FBTixFQUFTQyxFQUFUO0FBQUEsV0FBZ0JBLGtCQUFTO0FBQUEsYUFBS0MsRUFBRUMsU0FBRixDQUFZSCxDQUFaLEVBQWVMLEtBQUtTLEtBQUwsQ0FBV0wsR0FBWCxDQUFmLENBQUw7QUFBQSxLQUFULENBQWhCO0FBQUEsR0FBYjs7QUFFQSx5QkFBUyxhQUFULEVBQXdCLGdCQUFNRSxFQUFOLEVBQVk7QUFDbENILFNBQUssZ0JBQUwsRUFBdUIsQ0FBQyxFQUFDTyxNQUFNLENBQUMsR0FBRCxFQUFLLEdBQUwsRUFBUyxHQUFULENBQVAsRUFBc0JDLEtBQUssWUFBM0IsRUFBeUNDLElBQUksRUFBQ0MsTUFBTSxJQUFQLEVBQWFDLElBQUksRUFBQ0gsS0FBSyxPQUFOLEVBQWVJLE9BQU8sQ0FBdEIsRUFBakIsRUFBN0MsRUFBRCxDQUF2QixFQUFtSFQsRUFBbkg7QUFDRCxHQUZEOztBQUlBLHlCQUFTLGdCQUFULEVBQTJCLGdCQUFNQSxFQUFOLEVBQVk7QUFDckNILFNBQUssZ0JBQUwsRUFBdUIsQ0FBQyxFQUFDTyxNQUFNLENBQUMsR0FBRCxFQUFLLEdBQUwsRUFBUyxHQUFULENBQVAsRUFBc0JDLEtBQUssWUFBM0IsRUFBeUNDLElBQUksRUFBQ0MsTUFBTSxJQUFQLEVBQWFDLElBQUksRUFBQ0gsS0FBSyxPQUFOLEVBQWVJLE9BQU8sQ0FBQyxDQUF2QixFQUFqQixFQUE3QyxFQUFELENBQXZCLEVBQW9IVCxFQUFwSDtBQUNELEdBRkQ7O0FBSUEseUJBQVMsZUFBVCxFQUEwQixnQkFBTUEsRUFBTixFQUFZO0FBQ3BDSCxTQUFLLGdCQUFMLEVBQXVCLENBQUMsRUFBQ08sTUFBTSxDQUFDLEdBQUQsRUFBSyxHQUFMLEVBQVMsR0FBVCxDQUFQLEVBQXNCQyxLQUFLLFlBQTNCLEVBQXlDQyxJQUFJLEVBQUNDLE1BQU0sSUFBUCxFQUFhQyxJQUFJLEVBQUNILEtBQUssT0FBTixFQUFlSSxPQUFPLENBQXRCLEVBQWpCLEVBQTdDLEVBQUQsQ0FBdkIsRUFBbUhULEVBQW5IO0FBQ0QsR0FGRDs7QUFJQSx5QkFBUyxZQUFULEVBQXVCLGdCQUFNQSxFQUFOLEVBQVk7QUFDakNILFNBQUssZ0JBQUwsRUFBdUIsQ0FBQyxFQUFDTyxNQUFNLENBQUMsR0FBRCxFQUFLLEdBQUwsRUFBUyxHQUFULENBQVAsRUFBc0JDLEtBQUssWUFBM0IsRUFBeUNDLElBQUksRUFBQ0MsTUFBTSxJQUFQLEVBQWFDLElBQUksRUFBQ0gsS0FBSyxPQUFOLEVBQWVJLE9BQU8sQ0FBdEIsRUFBakIsRUFBN0MsRUFBRCxDQUF2QixFQUFtSFQsRUFBbkg7QUFDRCxHQUZEOztBQUlBLHlCQUFTLGlDQUFULEVBQTRDLGdCQUFNQSxFQUFOLEVBQVk7QUFDdERBLE9BQUcsUUFBSCxFQUFhO0FBQUEsYUFBS0MsRUFBRVMsTUFBRixDQUFVLFlBQU07QUFDaENoQixhQUFLUyxLQUFMLENBQVcsa0JBQVg7QUFDRCxPQUZpQixDQUFMO0FBQUEsS0FBYjtBQUdELEdBSkQ7QUFNRCxDQTFCRCIsImZpbGUiOiJjeWNsZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cblxuaW1wb3J0IHt0ZXN0LCBkZXNjcmliZX0gZnJvbSAnYXZhLXNwZWMnO1xuXG5jb25zdCBqc3NtID0gcmVxdWlyZSgnLi4vLi4vLi4vYnVpbGQvanNzbS5lczUuanMnKTtcblxuXG5cblxuXG5kZXNjcmliZSgnY3ljbGUgc3RyYXRlZ2llcycsIGFzeW5jIF9pdCA9PiB7XG5cbiAgY29uc3QgaXNfdiA9IChzdHIsIHYsIGl0KSA9PiBpdCh0ZXN0LCB0ID0+IHQuZGVlcEVxdWFsKHYsIGpzc20ucGFyc2Uoc3RyKSkpO1xuXG4gIGRlc2NyaWJlKCdiYXNpYyBjeWNsZScsIGFzeW5jIGl0ID0+IHtcbiAgICBpc192KCdbYSBiIGNdIC0+ICsxOycsIFt7ZnJvbTogWydhJywnYicsJ2MnXSwga2V5OiAndHJhbnNpdGlvbicsIHNlOiB7a2luZDogJy0+JywgdG86IHtrZXk6ICdjeWNsZScsIHZhbHVlOiAxfX19XSwgaXQpO1xuICB9KTtcblxuICBkZXNjcmliZSgnbmVnYXRpdmUgY3ljbGUnLCBhc3luYyBpdCA9PiB7XG4gICAgaXNfdignW2EgYiBjXSAtPiAtMTsnLCBbe2Zyb206IFsnYScsJ2InLCdjJ10sIGtleTogJ3RyYW5zaXRpb24nLCBzZToge2tpbmQ6ICctPicsIHRvOiB7a2V5OiAnY3ljbGUnLCB2YWx1ZTogLTF9fX1dLCBpdCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdudWxsYXJ5IGN5Y2xlJywgYXN5bmMgaXQgPT4ge1xuICAgIGlzX3YoJ1thIGIgY10gLT4gKzA7JywgW3tmcm9tOiBbJ2EnLCdiJywnYyddLCBrZXk6ICd0cmFuc2l0aW9uJywgc2U6IHtraW5kOiAnLT4nLCB0bzoge2tleTogJ2N5Y2xlJywgdmFsdWU6IDB9fX1dLCBpdCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd3aWRlIGN5Y2xlJywgYXN5bmMgaXQgPT4ge1xuICAgIGlzX3YoJ1thIGIgY10gLT4gKzI7JywgW3tmcm9tOiBbJ2EnLCdiJywnYyddLCBrZXk6ICd0cmFuc2l0aW9uJywgc2U6IHtraW5kOiAnLT4nLCB0bzoge2tleTogJ2N5Y2xlJywgdmFsdWU6IDJ9fX1dLCBpdCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdpbGxlZ2FsIGZyYWN0aW9uYWwgY3ljbGUgdGhyb3dzJywgYXN5bmMgaXQgPT4ge1xuICAgIGl0KCd0aHJvd3MnLCB0ID0+IHQudGhyb3dzKCAoKSA9PiB7XG4gICAgICBqc3NtLnBhcnNlKCdbYSBiIGNdIC0+ICsyLjU7Jyk7XG4gICAgfSApKTtcbiAgfSk7XG5cbn0pO1xuIl19